{% extends 'base.html' %}
{% block content %}
<div class='trainers-container'>
    <h1>List of Trainers</h1>
    {% if current_user.is_authenticated %} <!--Logged in-->
        <ul class="list-group trainers-group">
        {% for u in users %}
                {% if u.user_id != current_user.user_id %}
                    <a class="list-group-item" href="{{url_for('user_page', user_id=u.user_id)}}">{{u.first_name}} {{u.last_name}}</a>
                    {% if u in current_user.followers.all() and u in current_user.followed.all() %}
                    <p class="card-text"><small class="text-body-secondary">You are friends with this user</small></p>
                        <a class="btn btn-danger" href="{{url_for('unfriend_user', user_id = u.user_id)}}">Unfriend</a>
                    {% elif u in current_user.followers.all() and u not in current_user.followed.all() %}
                        <a class="btn btn-primary" href="{{url_for('friend_user', user_id = u.user_id)}}">Accept Friend Request</a>
                    {% elif u not in current_user.followers.all() and u in current_user.followed.all() %}
                        <a class="btn btn-danger" href="{{url_for('unfriend_user', user_id = u.user_id)}}">Remove Friend Request</a>
                    {% else %}
                        <a class="btn btn-primary" href="{{url_for('friend_user', user_id = u.user_id)}}">Send Friend Request</a>
                    {% endif %}
                {% else %}
                <li class="list-group-item" style="color:blue;">{{u.first_name}} {{u.last_name}} (you)</li>
                {% endif %}
                <p class="card-text"><small class="text-body-secondary">Created {{moment(u.date_created).fromNow()}}</small></p>
                <p class="card-text"><small class="text-body-secondary">Last seen {{moment(u.last_seen).fromNow()}}</small></p>
        {% endfor %}
        </ul>
    {% else %}
        <h2>Log in to see the other users</h2>
    {% endif %}
</div>

{% endblock %}